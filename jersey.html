<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Jersey detail view – Between The Stripes">
  <title>Jersey Details | Between The Stripes</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link href="css/styles.css" rel="stylesheet">
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-dark navbar-heritage fixed-top">
    <div class="container">
      <a class="navbar-brand" href="index.html">Between The Stripes</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMain" aria-controls="navMain" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navMain">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
          <li class="nav-item"><a class="nav-link active" href="gallery.html">Gallery</a></li>
          <li class="nav-item"><a class="nav-link" href="history.html">History</a></li>
          <li class="nav-item"><a class="nav-link" href="purpose.html">Purpose</a></li>
          <li class="nav-item"><a class="nav-link" href="saved.html">Saved</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <main class="container" style="padding-top: 100px;">
    <div id="jersey-content">
      <div class="text-center py-5">
        <p class="text-muted">Loading jersey details...</p>
      </div>
    </div>
    <nav class="mt-5 pt-4 border-top border-secondary">
      <div class="d-flex justify-content-between align-items-center">
        <a href="gallery.html" class="btn btn-outline-secondary">← Back to Gallery</a>
        <div id="jersey-nav"></div>
      </div>
    </nav>
  </main>

  <footer class="footer-heritage">
    <div class="container text-center">
      <p class="mb-1">Between The Stripes · Football Jersey Heritage</p>
      <p class="mb-0 small">Educational platform · No advertisements · No data collection</p>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  <script src="js/jersey-data.js"></script>
  <script src="js/favorites.js"></script>
  <script>
    (function() {
      const params = new URLSearchParams(window.location.search);
      const id = parseInt(params.get('id'), 10) || 1;
      const jersey = JERSEYS[id];

      if (!jersey) {
        document.getElementById('jersey-content').innerHTML =
          '<div class="alert alert-warning">Jersey not found. <a href="gallery.html">Return to gallery</a>.</div>';
        return;
      }

      document.title = jersey.name + ' | Between The Stripes';

      const content = document.getElementById('jersey-content');
      content.innerHTML = `
        <div class="row">
          <div class="col-lg-5 mb-4 mb-lg-0 position-relative">
            <img src="${jersey.image}" alt="${jersey.name}" class="img-fluid rounded-3 jersey-detail-img jersey-zoomable" style="max-height: 70vh; object-fit: contain; cursor: zoom-in;" role="button" tabindex="0" title="Click to enlarge">
            <button type="button" class="btn btn-outline-secondary btn-sm mt-2" id="jersey-save-btn" data-jersey-id="${jersey.id}" aria-label="Save jersey" title="Save to favourites">♡ Save</button>
          </div>
          <div class="col-lg-7">
            <h1 class="display-font mb-2">${jersey.name}</h1>
            <p class="text-muted mb-4">${jersey.club} · ${jersey.era} · ${jersey.competition}</p>
            <div class="mb-4">
              <span class="badge bg-secondary me-2">${jersey.colors.join(' · ')}</span>
            </div>
            <p>${jersey.description}</p>
            <h3 class="h5 mt-4">Heritage</h3>
            <p class="text-muted">${jersey.heritage}</p>
            <h3 class="h5 mt-4">Badge & Symbolism</h3>
            <p class="text-muted">${jersey.badge}</p>
          </div>
        </div>
      `;

      const prev = id > 1 ? id - 1 : 8;
      const next = id < 8 ? id + 1 : 1;
      document.getElementById('jersey-nav').innerHTML = `
        <div class="btn-group">
          <a href="jersey.html?id=${prev}" class="btn btn-outline-secondary btn-sm">← Prev</a>
          <span class="btn btn-outline-secondary btn-sm disabled">${id} / 8</span>
          <a href="jersey.html?id=${next}" class="btn btn-outline-secondary btn-sm">Next →</a>
        </div>
      `;
      var saveBtn = document.getElementById('jersey-save-btn');
      if (saveBtn && typeof isSaved === 'function' && typeof toggleSaved === 'function') {
        function upd() {
          saveBtn.textContent = isSaved(id) ? '♥ Saved' : '♡ Save';
          saveBtn.classList.toggle('saved', isSaved(id));
        }
        upd();
        saveBtn.onclick = function() { toggleSaved(id); upd(); };
      }
      var zoomImg = document.querySelector('.jersey-zoomable');
      if (zoomImg) {
        function openLightbox() {
          var overlay = document.createElement('div');
          overlay.className = 'lightbox-overlay';
          overlay.innerHTML = '<button type="button" class="lightbox-close" aria-label="Close">&times;</button><img src="' + jersey.image + '" alt="' + jersey.name + '">';
          overlay.onclick = function(e) { if (e.target === overlay || e.target.classList.contains('lightbox-close')) { document.body.removeChild(overlay); document.body.style.overflow = ''; } };
          overlay.querySelector('img').onclick = function(e) { e.stopPropagation(); };
          document.body.style.overflow = 'hidden';
          document.body.appendChild(overlay);
        }
        zoomImg.addEventListener('click', openLightbox);
        zoomImg.addEventListener('keydown', function(e) { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); openLightbox(); } });
      }
    })();
  </script>
  <script src="js/main.js"></script>
</body>
</html>
